#!/usr/bin/env python
"""Mail Manager.

A little python script to manage your mail server (Postfix + PostgreSQL).

Usage:
    mailmanager (-h | --help)
    mailmanager configure-postfix --dbuser <username> --dbpassword <password>
    mailmanager list
    mailmanager create-email <email> <password>

Options:
    -h --help   Show this screen.

"""
import sys
import os
import string
import importlib
import base64
from jinja2 import Environment, FileSystemLoader
from docopt import docopt

env = Environment(loader=FileSystemLoader(
    os.path.abspath(os.path.join(os.path.dirname(__file__), 'templates'))
))


if __name__ == "__main__":
    arguments = docopt(__doc__, version='Mail Manager 0.1')
    print(arguments)

    # here we are sure that the commands are the available ones
    module_name = sys.argv[1]

    command_module = importlib.import_module('commands.%s' % module_name)

    command_instance = command_module.Command()
    command_instance()

    sys.exit(1)

    commandname = sys.argv[1]
    nargs = len(sys.argv)

    """
    if commandname == "list":
    elif commandname == "config-postfix":
        template = env.get_template('main.cf')
        print template.render()
    elif commandname == "create" and nargs == 4:
    """
